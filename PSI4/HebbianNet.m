close all; clear all; clc;

start = [0 1; 0 1; 0 1; 0 1; 0 1; 0 1; 0 1; 0 1;
        0 1; 0 1; 0 1; 0 1; 0 1; 0 1; 0 1; 0 1;
        0 1; 0 1; 0 1; 0 1; 0 1; 0 1; 0 1; 0 1;
        0 1; 0 1; 0 1; 0 1; 0 1; 0 1; 0 1; 0 1;
        0 1; 0 1; 0 1; 0 1; 0 1; 0 1; 0 1; 0 1;
        0 1; 0 1; 0 1; 0 1; 0 1; 0 1; 0 1; 0 1;
        0 1; 0 1; 0 1; 0 1; 0 1; 0 1; 0 1; 0 1;
        0 1; 0 1; 0 1; 0 1; 0 1; 0 1; 0 1; 0 1;];

output_s = 64;
net =  newff(start, output_s,{'tansig'},'trainlm','learnh');

Input = [0 1 1 1 1 1 1 0 1 0 0 0 0 0 0 1 1 0 1 0 0 1 0 1 1 0 0 0 0 0 0 1 1 0 0 1 1 0 0 1 1 0 1 0 0 1 0 1 1 0 0 0 0 0 0 1 0 1 1 1 1 1 1 0;
        0 1 1 1 1 1 1 0 1 0 0 0 0 0 0 1 1 0 1 0 0 1 0 1 1 0 0 0 0 0	0 1 1 0 0 0 0 0 0 1 1 0 1 1 1 1 0 1 1 0 0 0 0 0 0 1 0 1 1 1 1 1 1 0;
        0 1 1 1 1 1 1 0 1 0 0 0 0 0 0 1 1 0 1 0 0 1 0 1 1 0 0 0 0 0 0 1 1 0 1 1 1 1 0 1 1 0 0 1 1 0 0 1 1 0 0 0 0 0 0 1 0 1 1 1 1 1 1 0;
        0 0 1 1 1 1 0 0 0 1 0 0 0 0 1 0 1 0 1 0 0 1 0 1 1 0 0 0 0 0 0 1 1 0 1 0 0 1 0 1 1 0 1 1 1 1 0 1 0 1 0 0 0 0 1 0 0 0 1 1 1 1 0 0;];

Output = [1 0 0 0;
          0 1 0 0;
          0 0 1 0;
          0 0 0 1];


lp.dr = 0.5;
lp.lr = 0.01;
InputT = Input';
HebbianWeights = learnh([0], InputT, [0], [0], Output, [0], [0], [0], [0],[0], lp, [0]);
      
net.trainParam.epochs = 1000;
net.trainParam.goal = 0.001;
net.trainParam.lr = 0.5;

net = train(net, InputT, HebbianWeights');


Test_emot = [0 0 1 1 1 1 0 0 0 1 0 0 0 0 1 0 1 0 1 0 0 1 0 1 1 0 0 0 0 0 0 1 1 0 1 1 1 1 0 1 1 0 1 0 0 1 0 1 0 1 0 0 0 0 1 0 0 0 1 1 1 1 0 0]';

result = sim(net, Test_emot);
    
	